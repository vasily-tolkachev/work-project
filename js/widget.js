(function(n){if(!n._TKSPCM){var t=function(t,i){var u=n.document,r=u.createElement(t.type=="js"?"script":"link");t.type=="js"?(r.src=t.src,r.type="text/javascript"):(r.href=t.src,r.type="text/css",r.rel="stylesheet");r.async=!1;r.onreadystatechange=r.onload=function(){var n=r.readyState;i&&!i.done&&(!n||/loaded|complete/.test(n))&&(i.done=!0,i())};(u.body||head).appendChild(r)};n._TKSPCM=n._TKSPCM||{dep:t,js:function(n,i){t({src:n,type:"js"},i)},css:function(n){t({src:n,type:"css"})}}}})(window),function(n){function u(n){t._config=n;r.js(n.base+"bundles/djw/jquery",f);r.css(n.base+"bundles/djw/mycontracts/css")}function f(){t.$=t.jQuery=jQuery.noConflict();h({client_id:i(),size:o()},e)}function e(r){for(var h=t._config.base+"contract/djw/mycontracts/"+i()+"/contract/",c=t._config.base+"contract/djw/mycontracts/"+i()+"/customer/",f=t.$("<table><tr><\/tr><\/table>").attr("id","tkspmc-contracts-table"),l=f.find("tr"),e=0;e<r.length;e++){var u=r[e],o=h+u.ContractId,a=c+u.CustomerId;$d=t.$('                <td style="padding: 0 10px 0 0;">                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;">№ <span class="tkspmc-contracts-item-number"><a style="color:#007ead; font: normal 12px/12px Tahoma;" title="Контакт на портале поставщиков"/><\/span><\/p>                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;">Заказчик<\/p>                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;"><span class="tkspmc-contracts-item-customer"><a style="color:#007ead; font: normal 12px/12px Tahoma;" title="Заказчик на портале поставщиков"/><\/span><\/p>                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;">Сумма:<span class="tkspmc-contracts-item-amount"><\/span> руб.<\/p>                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;">Дата заключения: <span class="tkspmc-contracts-item-date"><\/span><\/p>                    <p style="color:#6e777d; font: normal 12px/12px Tahoma;">Предмет: <span class="tkspmc-contracts-item-subj"><\/span><\/p>                <\/td>            ');$d.find(".tkspmc-contracts-item-number a").attr("href",o).html(u.Number);$d.find(".tkspmc-contracts-item-customer a").attr("href",a).html(u.CustomerName);$d.find(".tkspmc-contracts-item-amount").html(u.Amount);$d.find(".tkspmc-contracts-item-date").html(s(u.Concluded));$d.find(".tkspmc-contracts-item-subj").html(u.Subject);l.append($d);$d.on("click",function(){n.location.href=o})}r.length||f.append('<td><span class="tkspmc-contracts-empty">Нет заключенных контрактов<\/span><\/td>');t.$("#"+t._config.container).append(f)}function i(){return t._config.client_id}function o(){return t._config.size}function s(n){var t=new Date(parseInt(n.substr(6)));return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear()}function h(n,i){t.$.ajax({url:t._config.base+"contract/djw/mycontracts/"+n.client_id+"/"+n.size,dataType:"jsonp",jsonpCallback:"_TKSPMCCallback"}).done(i)}var t=n._TKSPMC={},r=n._TKSPCM;n._TKSPMC.configure=function(n){u(n)}}(window)
